---
description: SwiftUI view patterns with TCA - apply when building views with ViewAction, Bindable stores, scoping, or presentation
globs: ["Sources/**/*.swift"]
---

# View Patterns

## ViewAction Pattern

```swift
@ViewAction(for: TransactionsList.self)
struct TransactionsListView: View {
    let store: StoreOf<TransactionsList>

    var body: some View {
        Button("Delete") {
            send(.deleteButtonTapped, animation: .default)
        }
    }
}
```

**Key Points:**
- `@ViewAction` macro provides `send()` function
- Send actions with optional animation
- Automatically wraps in `.view()` action case
- Cleaner than calling `store.send(.view(.action))`

## Bindable Store Pattern

```swift
@Bindable var store: StoreOf<TransactionForm>

TextField("Description", text: $store.transaction.description)
Picker("Type", selection: $store.transaction.type) { /* ... */ }
```

**Key Points:**
- `@Bindable` enables two-way binding
- Works with `@ObservableState`
- Use `BindingReducer()` in reducer
- Automatically updates state

## Scope Pattern for Child Views

```swift
TransactionsListView(
    store: store.scope(
        state: \.transactionsList,
        action: \.transactionsList
    )
)
```

**Key Points:**
- Scope connects parent store to child view
- Child only sees its own state/actions
- Type-safe state and action mapping

## Sheet and Alert Presentation

### Sheets

```swift
// State
@Presents var destination: Destination.State?

@Reducer
enum Destination {
    case transactionForm(TransactionForm)
}

// View
.sheet(
    item: $store.scope(state: \.destination?.transactionForm, action: \.destination.transactionForm)
) { store in
    NavigationStack {
        TransactionFormView(store: store)
            .navigationTitle("New Transaction")
    }
}
```

### Alerts

```swift
// State
@Presents var alert: AlertState<Action.Alert>?

// View
.alert($store.scope(state: \.alert, action: \.alert))
```

**Key Points:**
- Use `@Presents` for presentation state
- Use `.sheet(item:)` pattern for TCA
- Use `AlertState` for type-safe alerts
- Scope the store to the presented feature

## List Patterns

```swift
List {
    ForEach(store.scope(state: \.filteredTodos, action: \.todos)) { store in
        TodoView(store: store)
    }
    .onDelete { store.send(.delete($0)) }
    .onMove { store.send(.move($0, $1)) }
}
```

**Key Points:**
- Scope to child stores for each list item
- Use SwiftUI list modifiers (onDelete, onMove)
- Customize appearance with row modifiers
